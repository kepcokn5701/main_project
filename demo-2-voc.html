<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VOC ë¬¸ì˜/ë‹µë³€ ìë™í™” | AI ê³ ê° ì‘ëŒ€ ì‹œìŠ¤í…œ</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: { sans: ['Noto Sans KR', 'sans-serif'] },
      colors: {
        dark: { 900: '#070b16', 800: '#0d1321', 700: '#131a2e', 600: '#1a2340', 500: '#212d52' },
      }
    }
  }
}
</script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Noto Sans KR', sans-serif; background: #070b16; color: #e2e8f0; }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #475569; }

  .inquiry-item { transition: all 0.2s ease; border-left: 3px solid transparent; }
  .inquiry-item:hover { background: rgba(56, 189, 248, 0.05); }
  .inquiry-item.active { background: rgba(56, 189, 248, 0.08); border-left-color: #38bdf8; }

  .chat-bubble { animation: bubbleIn 0.3s ease-out; }
  @keyframes bubbleIn {
    from { opacity: 0; transform: translateY(10px) scale(0.97); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  .typing-dot { animation: typingBounce 1.4s infinite ease-in-out; }
  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
  .typing-dot:nth-child(3) { animation-delay: 0.4s; }
  @keyframes typingBounce {
    0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
    40% { transform: scale(1); opacity: 1; }
  }

  .confidence-ring { transition: stroke-dashoffset 1s ease; }

  .stat-card { background: linear-gradient(135deg, rgba(56, 189, 248, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%); }

  .star-btn { transition: all 0.15s ease; }
  .star-btn:hover { transform: scale(1.2); }
  .star-btn.filled { color: #fbbf24; }

  .rag-result { transition: all 0.2s ease; }
  .rag-result:hover { background: rgba(56, 189, 248, 0.06); }

  .mode-toggle { position: relative; }
  .mode-toggle input:checked + .toggle-slider { background: linear-gradient(135deg, #38bdf8, #8b5cf6); }
  .mode-toggle input:checked + .toggle-slider::before { transform: translateX(20px); }
  .toggle-slider { background: #334155; border-radius: 12px; width: 44px; height: 24px; transition: 0.3s; cursor: pointer; position: relative; display: block; }
  .toggle-slider::before { content: ''; position: absolute; width: 18px; height: 18px; background: white; border-radius: 50%; top: 3px; left: 3px; transition: 0.3s; }

  .pulse-badge { animation: pulse 2s infinite; }
  @keyframes pulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.4); }
    50% { box-shadow: 0 0 0 6px rgba(56, 189, 248, 0); }
  }

  .fade-in { animation: fadeIn 0.4s ease; }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .slide-in-right { animation: slideRight 0.3s ease; }
  @keyframes slideRight {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
  }

  .gauge-fill { transition: width 1s ease; }

  .category-badge { font-size: 0.65rem; padding: 2px 8px; border-radius: 9999px; font-weight: 600; letter-spacing: 0.02em; }
</style>
</head>
<body class="min-h-screen flex flex-col">
<!-- AI DATA DISCLAIMER START (AIê¸°ë³¸ë²• ì¤€ìˆ˜) -->
<div id="ai-disclaimer-banner" style="position:fixed;top:0;left:0;right:0;z-index:99999;background:linear-gradient(135deg,#78350f,#92400e);border-bottom:2px solid #f59e0b;padding:8px 20px;display:flex;align-items:center;justify-content:center;gap:10px;font-family:Noto Sans KR,sans-serif;font-size:13px;color:#fef3c7;text-align:center;box-shadow:0 4px 16px rgba(0,0,0,.6);"><span style="font-size:18px;">&#x26A0;&#xFE0F;</span><span><strong style="color:#fde68a;">AI ìƒì„± ë°ì´í„° ê³ ì§€</strong> | ë³¸ í™”ë©´ì˜ ëª¨ë“  ë°ì´í„°(ì„±ëª…, ì—°ë½ì²˜, ì£¼ì†Œ, ê³„ëŸ‰ê°’, ìš”ê¸ˆ ë“±)ëŠ” <strong style="text-decoration:underline;">AIê°€ ìƒì„±í•œ ê°€ìƒ ë°ì´í„°</strong>ì´ë©°, ì‹¤ì œ ì¸ë¬¼ ê¸°ì—… ê³ ê° ì •ë³´ì™€ ì¼ì ˆ ë¬´ê´€í•©ë‹ˆë‹¤. <span style="opacity:.75;">(AIê¸°ë³¸ë²• ì¤€ìˆ˜)</span></span></div>
<div id="ai-disclaimer-spacer" style="height:40px;"></div>
<div id="ai-watermark" style="position:fixed;bottom:14px;right:14px;z-index:99998;background:rgba(120,53,15,.92);border:1px solid rgba(251,191,36,.45);border-radius:24px;padding:6px 16px;font-family:Noto Sans KR,sans-serif;font-size:11px;color:#fde68a;display:flex;align-items:center;gap:6px;backdrop-filter:blur(6px);box-shadow:0 4px 12px rgba(0,0,0,.4);pointer-events:none;">&#x1F916; AI ìƒì„± ê°€ìƒ ë°ì´í„°</div>
<div id="ai-consent-overlay" style="position:fixed;inset:0;z-index:999999;background:rgba(0,0,0,.88);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;font-family:Noto Sans KR,sans-serif;"><div style="background:linear-gradient(145deg,#1a1a2e,#16213e);border:1px solid rgba(251,191,36,.3);border-radius:20px;padding:36px 32px;max-width:520px;width:90%;text-align:center;box-shadow:0 24px 48px rgba(0,0,0,.6);"><div style="width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,#92400e,#b45309);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:32px;">&#x26A0;&#xFE0F;</div><h2 style="color:#fde68a;font-size:20px;font-weight:700;margin-bottom:12px;">AI ìƒì„± ë°ì´í„° ì•ˆë‚´</h2><p style="color:#cbd5e1;font-size:14px;line-height:1.8;margin-bottom:8px;">ë³¸ ì‹œìŠ¤í…œì€ <strong style="color:#fbbf24;">í”„ë¡œí† íƒ€ì… ì‹œì—° ëª©ì </strong>ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p><div style="background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.2);border-radius:12px;padding:16px;margin:16px 0;text-align:left;"><p style="color:#fef3c7;font-size:13px;line-height:1.8;">&#x2022; í™”ë©´ì— í‘œì‹œë˜ëŠ” <strong style="color:#fbbf24;">ëª¨ë“  ë°ì´í„°ëŠ” AIê°€ ìƒì„±í•œ ê°€ìƒ ë°ì´í„°</strong>ì…ë‹ˆë‹¤.<br>&#x2022; ì‹¤ì œ ì¸ë¬¼, ê¸°ì—…, ê³ ê°, ì„¤ë¹„ ì •ë³´ì™€ <strong style="color:#fbbf24;">ì¼ì ˆ ë¬´ê´€</strong>í•©ë‹ˆë‹¤.<br>&#x2022; ì´ë¦„, ì—°ë½ì²˜, ì£¼ì†Œ, ê³„ê¸°ë²ˆí˜¸, ìš”ê¸ˆ ë“± ëª¨ë“  ìˆ˜ì¹˜ëŠ” í—ˆêµ¬ì…ë‹ˆë‹¤.<br>&#x2022; ë³¸ ê³ ì§€ëŠ” <strong style="color:#fbbf24;">AIê¸°ë³¸ë²•</strong>ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.</p></div><button onclick="document.getElementById('ai-consent-overlay').style.display='none';" style="background:linear-gradient(135deg,#b45309,#d97706);color:#fff;border:none;padding:12px 48px;border-radius:12px;font-size:15px;font-weight:700;cursor:pointer;font-family:Noto Sans KR,sans-serif;box-shadow:0 4px 16px rgba(217,119,6,.4);transition:transform .15s;">í™•ì¸í–ˆìŠµë‹ˆë‹¤</button><p style="color:#64748b;font-size:11px;margin-top:14px;">ì´ ì•ˆë‚´ë¥¼ í™•ì¸í•´ì•¼ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div></div>
<!-- AI DATA DISCLAIMER END -->

<!-- Top Navigation -->
<nav class="flex-shrink-0 border-b border-white/5 bg-dark-800/80 backdrop-blur-md" style="z-index:50;">
  <div class="flex items-center justify-between px-5 py-3">
    <div class="flex items-center gap-3">
      <a href="index.html" class="flex items-center gap-2 text-slate-400 hover:text-sky-400 transition-colors text-sm">
        <i data-lucide="arrow-left" class="w-4 h-4"></i>
        <span>ëŒì•„ê°€ê¸°</span>
      </a>
      <div class="w-px h-5 bg-white/10"></div>
      <div class="flex items-center gap-2.5">
        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-sky-500 to-violet-600 flex items-center justify-center">
          <i data-lucide="message-square-reply" class="w-4 h-4 text-white"></i>
        </div>
        <div>
          <h1 class="text-sm font-bold text-white leading-tight">VOC ë¬¸ì˜/ë‹µë³€ ìë™í™”</h1>
          <p class="text-[10px] text-slate-500 leading-tight">RAG ê¸°ë°˜ ì§€ëŠ¥í˜• ê³ ê° ì‘ëŒ€ ì‹œìŠ¤í…œ</p>
        </div>
      </div>
    </div>
    <div class="flex items-center gap-4">
      <!-- Mode Toggle -->
      <div class="flex items-center gap-2.5 bg-dark-700 rounded-lg px-3 py-1.5">
        <span id="modeLabel" class="text-xs font-medium text-sky-400">AI ìë™ ë‹µë³€</span>
        <label class="mode-toggle">
          <input type="checkbox" id="modeToggle" class="sr-only" onchange="toggleMode()">
          <span class="toggle-slider"></span>
        </label>
        <span class="text-xs text-slate-500">ë‹´ë‹¹ì ê²€í† </span>
      </div>
      <div class="flex items-center gap-1.5">
        <span class="w-2 h-2 rounded-full bg-emerald-400 pulse-badge"></span>
        <span class="text-xs text-emerald-400 font-medium">ì‹œìŠ¤í…œ ì •ìƒ</span>
      </div>
    </div>
  </div>
</nav>

<!-- Statistics Bar -->
<div class="flex-shrink-0 border-b border-white/5 bg-dark-800/50 px-5 py-2.5">
  <div class="flex items-center gap-3">
    <div class="stat-card flex items-center gap-2.5 px-4 py-2 rounded-lg border border-white/5 flex-1">
      <div class="w-8 h-8 rounded-lg bg-sky-500/10 flex items-center justify-center">
        <i data-lucide="inbox" class="w-4 h-4 text-sky-400"></i>
      </div>
      <div>
        <p class="text-[10px] text-slate-500 font-medium">ì˜¤ëŠ˜ ì ‘ìˆ˜</p>
        <p class="text-base font-bold text-white leading-tight" id="statTotal">147<span class="text-xs text-slate-500 font-normal ml-0.5">ê±´</span></p>
      </div>
    </div>
    <div class="stat-card flex items-center gap-2.5 px-4 py-2 rounded-lg border border-white/5 flex-1">
      <div class="w-8 h-8 rounded-lg bg-violet-500/10 flex items-center justify-center">
        <i data-lucide="cpu" class="w-4 h-4 text-violet-400"></i>
      </div>
      <div>
        <p class="text-[10px] text-slate-500 font-medium">AI ì²˜ë¦¬</p>
        <p class="text-base font-bold text-white leading-tight">132<span class="text-xs text-slate-500 font-normal ml-0.5">ê±´</span> <span class="text-xs text-emerald-400 font-semibold">(89.8%)</span></p>
      </div>
    </div>
    <div class="stat-card flex items-center gap-2.5 px-4 py-2 rounded-lg border border-white/5 flex-1">
      <div class="w-8 h-8 rounded-lg bg-amber-500/10 flex items-center justify-center">
        <i data-lucide="timer" class="w-4 h-4 text-amber-400"></i>
      </div>
      <div>
        <p class="text-[10px] text-slate-500 font-medium">í‰ê·  ì‘ë‹µ ì‹œê°„</p>
        <p class="text-base font-bold text-white leading-tight">2.3<span class="text-xs text-slate-500 font-normal ml-0.5">ì´ˆ</span></p>
      </div>
    </div>
    <div class="stat-card flex items-center gap-2.5 px-4 py-2 rounded-lg border border-white/5 flex-1">
      <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
        <i data-lucide="star" class="w-4 h-4 text-emerald-400"></i>
      </div>
      <div>
        <p class="text-[10px] text-slate-500 font-medium">ê³ ê° ë§Œì¡±ë„</p>
        <p class="text-base font-bold text-white leading-tight">4.6<span class="text-xs text-slate-500 font-normal ml-0.5">/5.0</span></p>
      </div>
    </div>
  </div>
</div>

<!-- Main Content Area -->
<div class="flex flex-1 overflow-hidden" style="height: calc(100vh - 120px);">

  <!-- Left Sidebar: Inquiry List -->
  <div class="w-80 flex-shrink-0 border-r border-white/5 bg-dark-800/40 flex flex-col">
    <div class="px-4 py-3 border-b border-white/5">
      <div class="flex items-center justify-between mb-2.5">
        <h2 class="text-sm font-bold text-white">ì ‘ìˆ˜ ë¬¸ì˜</h2>
        <span class="text-[10px] bg-sky-500/20 text-sky-400 font-bold px-2 py-0.5 rounded-full">12ê±´ ëŒ€ê¸°</span>
      </div>
      <div class="relative">
        <i data-lucide="search" class="w-3.5 h-3.5 text-slate-500 absolute left-3 top-1/2 -translate-y-1/2"></i>
        <input type="text" placeholder="ë¬¸ì˜ ê²€ìƒ‰..." class="w-full bg-dark-700 border border-white/5 rounded-lg pl-9 pr-3 py-2 text-xs text-white placeholder-slate-500 focus:outline-none focus:border-sky-500/50 transition-colors">
      </div>
    </div>
    <div class="flex-1 overflow-y-auto" id="inquiryList">
      <!-- Populated by JS -->
    </div>
  </div>

  <!-- Center: Chat Area -->
  <div class="flex-1 flex flex-col bg-dark-900/50 min-w-0">
    <!-- Chat Header -->
    <div class="flex-shrink-0 px-5 py-3 border-b border-white/5 bg-dark-800/30 flex items-center justify-between">
      <div class="flex items-center gap-3" id="chatHeader">
        <div class="w-9 h-9 rounded-full bg-gradient-to-br from-sky-400 to-blue-600 flex items-center justify-center text-white font-bold text-sm" id="chatAvatar">ê¹€</div>
        <div>
          <p class="text-sm font-semibold text-white" id="chatName">ê¹€ë¯¼ìˆ˜</p>
          <p class="text-[10px] text-slate-500" id="chatMeta">ê³ ê°ë²ˆí˜¸: 2024-88721 Â· ì£¼ê±°ìš© Â· ì„œìš¸ ê°•ë‚¨êµ¬</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-[10px] bg-emerald-500/15 text-emerald-400 px-2.5 py-1 rounded-full font-medium" id="chatStatus">AI ì‘ë‹µ ì™„ë£Œ</span>
      </div>
    </div>

    <!-- Chat Messages -->
    <div class="flex-1 overflow-y-auto px-5 py-4 space-y-4" id="chatMessages">
      <!-- Populated by JS -->
    </div>

    <!-- Chat Input -->
    <div class="flex-shrink-0 px-5 py-3 border-t border-white/5 bg-dark-800/30">
      <div class="flex items-end gap-3">
        <div class="flex-1 relative">
          <textarea id="chatInput" rows="1" placeholder="ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”..." class="w-full bg-dark-700 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-sky-500/50 resize-none transition-colors" onkeydown="handleChatKeydown(event)" oninput="autoResize(this)"></textarea>
        </div>
        <button onclick="sendMessage()" class="flex-shrink-0 w-10 h-10 rounded-xl bg-gradient-to-r from-sky-500 to-violet-600 flex items-center justify-center hover:opacity-90 transition-opacity">
          <i data-lucide="send" class="w-4 h-4 text-white"></i>
        </button>
      </div>
      <div class="flex items-center gap-3 mt-2">
        <button class="text-[10px] text-slate-500 hover:text-slate-300 flex items-center gap-1 transition-colors">
          <i data-lucide="paperclip" class="w-3 h-3"></i> íŒŒì¼ ì²¨ë¶€
        </button>
        <button class="text-[10px] text-slate-500 hover:text-slate-300 flex items-center gap-1 transition-colors">
          <i data-lucide="image" class="w-3 h-3"></i> ì´ë¯¸ì§€
        </button>
        <button class="text-[10px] text-slate-500 hover:text-slate-300 flex items-center gap-1 transition-colors">
          <i data-lucide="file-text" class="w-3 h-3"></i> í…œí”Œë¦¿
        </button>
        <div class="ml-auto text-[10px] text-slate-600" id="inputHint">Enterë¡œ ì „ì†¡ Â· Shift+Enterë¡œ ì¤„ë°”ê¿ˆ</div>
      </div>
    </div>
  </div>

  <!-- Right Panel: AI Analysis -->
  <div class="w-80 flex-shrink-0 border-l border-white/5 bg-dark-800/40 flex flex-col overflow-y-auto" id="analysisPanel">
    <!-- Populated by JS -->
  </div>

</div>

<script>
// ===================== DATA =====================
const inquiries = [
  {
    id: 1,
    name: 'ê¹€ë¯¼ìˆ˜',
    avatar: 'ê¹€',
    avatarColor: 'from-sky-400 to-blue-600',
    customerId: '2024-88721',
    type: 'ì£¼ê±°ìš©',
    location: 'ì„œìš¸ ê°•ë‚¨êµ¬',
    category: 'ìš”ê¸ˆë¬¸ì˜',
    categoryColor: 'bg-amber-500/15 text-amber-400',
    preview: 'ì „ê¸°ìš”ê¸ˆì´ ê°‘ìê¸° 2ë°°ë¡œ ì˜¬ëì–´ìš”',
    time: '2ë¶„ ì „',
    unread: true,
    confidence: 94,
    messages: [
      { role: 'customer', text: 'ì•ˆë…•í•˜ì„¸ìš”, ì´ë²ˆ ë‹¬ ì „ê¸°ìš”ê¸ˆì´ ê°‘ìê¸° 2ë°°ë¡œ ì˜¬ëì–´ìš”. ì§€ë‚œ ë‹¬ì—ëŠ” 45,000ì› ì •ë„ ë‚˜ì™”ëŠ”ë° ì´ë²ˆ ë‹¬ì— 92,000ì›ì´ ì²­êµ¬ëìŠµë‹ˆë‹¤. ì‚¬ìš©ëŸ‰ì´ í¬ê²Œ ë‹¬ë¼ì§„ ê²ƒ ê°™ì§€ ì•Šì€ë° ì™œ ì´ëŸ° ê±´ê°€ìš”?', time: '14:23' },
      { role: 'ai', text: 'ì•ˆë…•í•˜ì„¸ìš”, ê¹€ë¯¼ìˆ˜ ê³ ê°ë‹˜. ì „ê¸°ìš”ê¸ˆ ê´€ë ¨ ë¬¸ì˜ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.\n\nì¡°íšŒ ê²°ê³¼, ì´ë²ˆ ë‹¬ ì‚¬ìš©ëŸ‰ì´ ì „ì›” ëŒ€ë¹„ ì•½ 45% ì¦ê°€í•œ ê²ƒìœ¼ë¡œ í™•ì¸ë©ë‹ˆë‹¤. ì£¼ìš” ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n1. **ëˆ„ì§„ì œ êµ¬ê°„ ìƒìŠ¹**: ì‚¬ìš©ëŸ‰ 200kWh ì´ˆê³¼ë¡œ 2êµ¬ê°„â†’3êµ¬ê°„ìœ¼ë¡œ ë³€ê²½ë˜ì–´ ë‹¨ê°€ê°€ ì•½ 1.8ë°° ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤.\n2. **í•˜ì ˆê¸° ê³„ì ˆ ìš”ê¸ˆ**: 7~8ì›” ëƒ‰ë°© ìˆ˜ìš” ì¦ê°€ì— ë”°ë¥¸ ê³„ì ˆë³„ ìš”ê¸ˆ ì²´ê³„ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.\n3. **ì‚¬ìš©ëŸ‰ ë³€í™”**: ì „ì›” 287kWh â†’ ê¸ˆì›” 416kWhë¡œ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.\n\nğŸ’¡ **ìš”ê¸ˆ ì ˆê° ë°©ì•ˆ:**\n- ì—ë„ˆì§€ íš¨ìœ¨ 1ë“±ê¸‰ ê°€ì „ ì‚¬ìš©\n- ëƒ‰ë°© ì ì • ì˜¨ë„ 26Â°C ìœ ì§€\n- ëŒ€ê¸°ì „ë ¥ ì°¨ë‹¨ ì½˜ì„¼íŠ¸ í™œìš©\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ ì£¼ì„¸ìš”.', time: '14:23', rating: 0 }
    ],
    ragResults: [
      { title: 'ëˆ„ì§„ì œ ìš”ê¸ˆ ìƒìŠ¹ ê´€ë ¨ ì•ˆë‚´ ì‚¬ë¡€', score: 96.2, date: '2024.11.15' },
      { title: 'í•˜ì ˆê¸° ìš”ê¸ˆ í­ë“± ë¯¼ì› ì²˜ë¦¬ ê±´', score: 93.8, date: '2024.08.22' },
      { title: 'ì „ê¸°ìš”ê¸ˆ ë‚©ë¶€ ê´€ë ¨ FAQ ì‘ë‹µ', score: 89.4, date: '2024.10.03' }
    ],
    suggestedResponse: 'ê³ ê°ë‹˜ì˜ ì´ë²ˆ ë‹¬ ìš”ê¸ˆ ìƒìŠ¹ì€ ëˆ„ì§„ì œ êµ¬ê°„ ë³€ê²½ê³¼ í•˜ì ˆê¸° ê³„ì ˆ ìš”ê¸ˆ ì ìš©ì´ ì£¼ìš” ì›ì¸ì…ë‹ˆë‹¤. ìƒì„¸í•œ ìš”ê¸ˆ ëª…ì„¸ì„œë¥¼ ì´ë©”ì¼ë¡œ ë°œì†¡í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.'
  },
  {
    id: 2,
    name: 'ì´ì˜í¬',
    avatar: 'ì´',
    avatarColor: 'from-rose-400 to-pink-600',
    customerId: '2024-55234',
    type: 'ì£¼ê±°ìš©',
    location: 'ê²½ê¸° ìˆ˜ì›ì‹œ',
    category: 'ì •ì „',
    categoryColor: 'bg-red-500/15 text-red-400',
    preview: 'ì •ì „ì´ ë°œìƒí–ˆëŠ”ë° ì–¸ì œ ë³µêµ¬ë˜ë‚˜ìš”?',
    time: '8ë¶„ ì „',
    unread: true,
    confidence: 91,
    messages: [
      { role: 'customer', text: 'ì§€ê¸ˆ ì§‘ì— ì •ì „ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì•„íŒŒíŠ¸ ì „ì²´ê°€ ë‹¤ ì •ì „ì¸ ê²ƒ ê°™ì€ë° ì–¸ì œ ë³µêµ¬ë˜ë‚˜ìš”? ëƒ‰ì¥ê³ ì— ìŒì‹ë„ ë§ê³  ë„ˆë¬´ ê±±ì •ë©ë‹ˆë‹¤.', time: '14:15' },
      { role: 'ai', text: 'ì´ì˜í¬ ê³ ê°ë‹˜, ë¶ˆí¸ì„ ë“œë ¤ ëŒ€ë‹¨íˆ ì£„ì†¡í•©ë‹ˆë‹¤.\n\ní˜„ì¬ ê²½ê¸° ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì¼ëŒ€ì—ì„œ **ë°°ì „ì„ ë¡œ ê³ ì¥**ìœ¼ë¡œ ì¸í•œ ì •ì „ì´ ë°œìƒí•œ ê²ƒìœ¼ë¡œ í™•ì¸ë©ë‹ˆë‹¤.\n\nğŸ“‹ **ì •ì „ í˜„í™©:**\n- ë°œìƒ ì‹œê°: ì˜¤ëŠ˜ 14:08\n- ì˜í–¥ ì§€ì—­: ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ë§¤íƒ„ë™ ì¼ëŒ€ (ì•½ 2,300ì„¸ëŒ€)\n- ì›ì¸: ì§€ì¤‘ ë°°ì „ì¼€ì´ë¸” ì‚¬ê³ \n- ë³µêµ¬ ì˜ˆìƒ: **16:00 ì´ì „ ë³µêµ¬ ëª©í‘œ**\n\nâš¡ **ë³µêµ¬ ì§„í–‰ ìƒí™©:**\n- í˜„ì¬ ë³µêµ¬íŒ€ 2ê°œ ì¡°ê°€ í˜„ì¥ì— ì¶œë™í•˜ì—¬ ì‘ì—… ì¤‘ì…ë‹ˆë‹¤.\n- ê¸´ê¸‰ ë°œì „ì°¨ëŸ‰ 1ëŒ€ê°€ ë°°ì¹˜ë˜ì–´ ìš°ì„  ë³µêµ¬ë¥¼ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nğŸ”” ë³µêµ¬ ì™„ë£Œ ì‹œ SMSë¡œ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì •ì „ìœ¼ë¡œ ì¸í•œ ì‹í’ˆ í”¼í•´ê°€ ë°œìƒí•œ ê²½ìš°, ë³µêµ¬ í›„ ê³ ê°ì„¼í„°(123)ë¡œ í”¼í•´ ì ‘ìˆ˜ë¥¼ í•˜ì‹œë©´ ë³´ìƒ ì ˆì°¨ë¥¼ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.', time: '14:15', rating: 0 }
    ],
    ragResults: [
      { title: 'ë°°ì „ì„ ë¡œ ì •ì „ ë³µêµ¬ ì•ˆë‚´ ì‚¬ë¡€', score: 95.1, date: '2024.12.01' },
      { title: 'ì•„íŒŒíŠ¸ ë‹¨ì§€ ì •ì „ ë³µêµ¬ ì ˆì°¨', score: 92.7, date: '2024.09.18' },
      { title: 'ì •ì „ í”¼í•´ ë³´ìƒ ì•ˆë‚´ ê°€ì´ë“œ', score: 88.3, date: '2024.11.20' }
    ],
    suggestedResponse: 'í˜„ì¬ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì¼ëŒ€ ë°°ì „ì„ ë¡œ ì‚¬ê³ ë¡œ ì •ì „ì´ ë°œìƒí–ˆìœ¼ë©°, ë³µêµ¬íŒ€ì´ í˜„ì¥ì—ì„œ ì‘ì—… ì¤‘ì…ë‹ˆë‹¤. 16ì‹œ ì´ì „ ë³µêµ¬ë¥¼ ëª©í‘œë¡œ í•˜ê³  ìˆìŠµë‹ˆë‹¤.'
  },
  {
    id: 3,
    name: 'ë°•ì¤€í˜¸',
    avatar: 'ë°•',
    avatarColor: 'from-emerald-400 to-teal-600',
    customerId: '2024-31098',
    type: 'ì‚°ì—…ìš©',
    location: 'ì¶©ë‚¨ ì•„ì‚°ì‹œ',
    category: 'ì‹ ì¬ìƒ',
    categoryColor: 'bg-emerald-500/15 text-emerald-400',
    preview: 'íƒœì–‘ê´‘ ë°œì „ ì—°ê³„ ì‹ ì²­í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤',
    time: '15ë¶„ ì „',
    unread: false,
    confidence: 97,
    messages: [
      { role: 'customer', text: 'ê³µì¥ ì˜¥ìƒì— íƒœì–‘ê´‘ íŒ¨ë„ì„ ì„¤ì¹˜í–ˆëŠ”ë°, í•œì „ ê³„í†µ ì—°ê³„ ì‹ ì²­ì„ í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤. ìš©ëŸ‰ì€ 50kWì´ê³  í•„ìš”í•œ ì„œë¥˜ì™€ ì ˆì°¨ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.', time: '14:08' },
      { role: 'ai', text: 'ë°•ì¤€í˜¸ ê³ ê°ë‹˜, íƒœì–‘ê´‘ ë°œì „ ê³„í†µì—°ê³„ ì‹ ì²­ ê´€ë ¨ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nğŸ“‘ **50kW íƒœì–‘ê´‘ ê³„í†µì—°ê³„ ì‹ ì²­ ì ˆì°¨:**\n\n**1ë‹¨ê³„: ë°œì „ì‚¬ì—… í—ˆê°€ (ì‚°ì—…í†µìƒìì›ë¶€)**\n- 1MW ë¯¸ë§Œì´ë¯€ë¡œ ì‹œÂ·êµ°Â·êµ¬ì²­ í—ˆê°€ ëŒ€ìƒ\n- ì†Œìš”ê¸°ê°„: ì•½ 2~3ì£¼\n\n**2ë‹¨ê³„: ê³„í†µì—°ê³„ ê¸°ìˆ ê²€í†  ì‹ ì²­**\n- ì „ë ¥ê±°ë˜ì†Œ â†’ í•œêµ­ì „ë ¥ ë°°ì „ì„¼í„°\n- í•„ìš” ì„œë¥˜:\n  â‘  ê³„í†µì—°ê³„ ì‹ ì²­ì„œ\n  â‘¡ ë°œì „ì„¤ë¹„ ì‚¬ì–‘ì„œ (ì¸ë²„í„°, íŒ¨ë„ ìŠ¤í™)\n  â‘¢ ì „ê¸°ì•ˆì „ê´€ë¦¬ì ì„ ì„ ê³„ì•½ì„œ\n  â‘£ ë‹¨ì„ ê²°ì„ ë„ ë° ë°°ì¹˜ë„\n  â‘¤ ì‚¬ì—…ìë“±ë¡ì¦ ì‚¬ë³¸\n\n**3ë‹¨ê³„: ë°°ì „ê³„í†µ ì˜í–¥í‰ê°€**\n- ê³„í†µ ì—°ê³„ ê°€ëŠ¥ ì—¬ë¶€ ê²€í†  (ì•½ 14ì˜ì—…ì¼)\n\n**4ë‹¨ê³„: ê³µì‚¬ ë° ì¤€ê³µê²€ì‚¬**\n- ì—°ê³„ìš© ì „ìš© ê³„ëŸ‰ê¸° ì„¤ì¹˜\n- í•œì „ ì¤€ê³µê²€ì‚¬ â†’ ìƒì—…ìš´ì „ ê°œì‹œ\n\nğŸ’¡ ì´ ì†Œìš”ê¸°ê°„: ì•½ **2~3ê°œì›”**\n\nì˜¨ë¼ì¸ ì‹ ì²­: í•œêµ­ì „ë ¥ ë¶„ì‚°ì „ì› í¬íƒˆ(https://dp.kepco.co.kr)\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ ì£¼ì„¸ìš”.', time: '14:09', rating: 0 }
    ],
    ragResults: [
      { title: 'ì†Œê·œëª¨ íƒœì–‘ê´‘ ê³„í†µì—°ê³„ ì ˆì°¨ ì•ˆë‚´', score: 97.8, date: '2024.10.12' },
      { title: '50kWê¸‰ íƒœì–‘ê´‘ ì—°ê³„ ì‹ ì²­ ì‚¬ë¡€', score: 94.5, date: '2024.11.08' },
      { title: 'ë¶„ì‚°ì „ì› ê³„í†µì—°ê³„ ê¸°ìˆ ê¸°ì¤€', score: 91.2, date: '2024.07.25' }
    ],
    suggestedResponse: '50kW íƒœì–‘ê´‘ ë°œì „ ê³„í†µì—°ê³„ ì‹ ì²­ì„ ìœ„í•´ì„œëŠ” ë°œì „ì‚¬ì—… í—ˆê°€ â†’ ê¸°ìˆ ê²€í†  â†’ ì˜í–¥í‰ê°€ â†’ ì¤€ê³µê²€ì‚¬ ì ˆì°¨ë¥¼ ê±°ì¹˜ì‹œë©´ ë©ë‹ˆë‹¤.'
  },
  {
    id: 4,
    name: 'ìµœì„œì—°',
    avatar: 'ìµœ',
    avatarColor: 'from-violet-400 to-purple-600',
    customerId: '2024-67412',
    type: 'ì£¼ê±°ìš©',
    location: 'ë¶€ì‚° í•´ìš´ëŒ€êµ¬',
    category: 'ê²€ì¹¨',
    categoryColor: 'bg-violet-500/15 text-violet-400',
    preview: 'ê³„ëŸ‰ê¸° ê³ ì¥ ê°™ì€ë° í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤',
    time: '23ë¶„ ì „',
    unread: false,
    confidence: 88,
    messages: [
      { role: 'customer', text: 'ê³„ëŸ‰ê¸° ìˆ«ìê°€ ì•ˆ ëŒì•„ê°€ëŠ” ê²ƒ ê°™ì•„ìš”. í•œ ë‹¬ì§¸ ê±°ì˜ ê°™ì€ ìˆ«ìë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ”ë° ì „ê¸°ëŠ” ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆê±°ë“ ìš”. ê³ ì¥ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.', time: '14:00' },
      { role: 'ai', text: 'ìµœì„œì—° ê³ ê°ë‹˜, ê³„ëŸ‰ê¸° ì´ìƒ ê´€ë ¨ ë¬¸ì˜ ê°ì‚¬í•©ë‹ˆë‹¤.\n\në§ì”€í•˜ì‹  ì¦ìƒì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.\n\nğŸ” **ì›ê²© ê²€ì¹¨ ë°ì´í„° í™•ì¸ ê²°ê³¼:**\n- ê³„ëŸ‰ê¸° ë²ˆí˜¸: BN-2024-67412\n- ìµœê·¼ 30ì¼ ê²€ì¹¨ê°’ ë³€ë™: ê±°ì˜ ì—†ìŒ (Â±2kWh)\n- ì •ìƒ ì‚¬ìš© íŒ¨í„´ ëŒ€ë¹„ í˜„ì €íˆ ë‚®ì€ ìˆ˜ì¹˜\n\nâš ï¸ **ê³„ëŸ‰ê¸° ê³ ì¥ ê°€ëŠ¥ì„±ì´ ë†’ì€ ìƒí™©**ìœ¼ë¡œ íŒë‹¨ë©ë‹ˆë‹¤.\n\nğŸ“‹ **ì¡°ì¹˜ ê³„íš:**\n1. **í˜„ì¥ ì ê²€ ì ‘ìˆ˜ ì™„ë£Œ** - ì ‘ìˆ˜ë²ˆí˜¸: VOC-2024-12847\n2. **ë°©ë¬¸ ì˜ˆì •ì¼: 2ì˜ì—…ì¼ ì´ë‚´** (ì •í™•í•œ ì¼ì •ì€ SMSë¡œ ì•ˆë‚´)\n3. ì ê²€ í•­ëª©:\n   - ê³„ëŸ‰ê¸° ì™¸ê´€ ë° ë‹¨ì ìƒíƒœ\n   - CT(ë³€ë¥˜ê¸°) ê²°ì„  í™•ì¸\n   - ì •ë°€ë„ ì‹œí—˜\n4. **ê³ ì¥ í™•ì¸ ì‹œ:** ì¦‰ì‹œ ì‹ ê·œ ê³„ëŸ‰ê¸°ë¡œ êµì²´ (ë¬´ìƒ)\n5. **ìš”ê¸ˆ ì •ì‚°:** ê³ ì¥ ê¸°ê°„ ì¶”ì • ì‚¬ìš©ëŸ‰ìœ¼ë¡œ ì†Œê¸‰ ì •ì‚°\n\në°©ë¬¸ ì‹œ ëŒë‚´ ì¶œì…ì´ í•„ìš”í•  ìˆ˜ ìˆìœ¼ë‹ˆ, ì—°ë½ ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.', time: '14:01', rating: 0 }
    ],
    ragResults: [
      { title: 'ê³„ëŸ‰ê¸° ê³ ì¥ ì‹ ê³  ì²˜ë¦¬ ì‚¬ë¡€', score: 93.4, date: '2024.11.30' },
      { title: 'ì›ê²©ê²€ì¹¨ ì´ìƒ ë°ì´í„° ë¶„ì„', score: 90.1, date: '2024.10.15' },
      { title: 'ê³„ëŸ‰ê¸° êµì²´ ë° ì •ì‚° ê¸°ì¤€', score: 87.6, date: '2024.09.05' }
    ],
    suggestedResponse: 'ì›ê²© ê²€ì¹¨ ë°ì´í„° í™•ì¸ ê²°ê³¼ ê³„ëŸ‰ê¸° ì´ìƒì´ ì˜ì‹¬ë˜ì–´, 2ì˜ì—…ì¼ ì´ë‚´ í˜„ì¥ ì ê²€ì„ ì ‘ìˆ˜í•˜ì˜€ìŠµë‹ˆë‹¤. ê³ ì¥ í™•ì¸ ì‹œ ë¬´ìƒ êµì²´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.'
  },
  {
    id: 5,
    name: 'ì •í•˜ëŠ˜',
    avatar: 'ì •',
    avatarColor: 'from-orange-400 to-red-600',
    customerId: '2024-43289',
    type: 'ì£¼ê±°ìš©',
    location: 'ëŒ€ì „ ìœ ì„±êµ¬',
    category: 'ì•ˆì „',
    categoryColor: 'bg-red-500/15 text-red-400',
    preview: 'ì „ê¸° ëˆ„ì „ì´ ì˜ì‹¬ë©ë‹ˆë‹¤',
    time: '31ë¶„ ì „',
    unread: false,
    confidence: 96,
    messages: [
      { role: 'customer', text: 'ìš”ì¦˜ ì§‘ì—ì„œ ë²½ì„ ë§Œì§€ë©´ ì‚´ì§ ì „ê¸°ê°€ ì˜¤ëŠ” ëŠë‚Œì´ ìˆì–´ìš”. ê·¸ë¦¬ê³  ì°¨ë‹¨ê¸°ê°€ ìê¾¸ ë‚´ë ¤ê°€ëŠ”ë° ëˆ„ì „ì´ ì˜ì‹¬ë©ë‹ˆë‹¤. ìœ„í—˜í•œ ê±´ ì•„ë‹Œì§€ ê±±ì •ë©ë‹ˆë‹¤.', time: '13:52' },
      { role: 'ai', text: 'ì •í•˜ëŠ˜ ê³ ê°ë‹˜, ëˆ„ì „ ì˜ì‹¬ ì¦ìƒì€ **ì•ˆì „ê³¼ ì§ê²°ë˜ëŠ” ê¸´ê¸‰ ì‚¬ì•ˆ**ì…ë‹ˆë‹¤.\n\nğŸš¨ **ì¦‰ì‹œ ì¡°ì¹˜ ì‚¬í•­ (ì¤‘ìš”):**\n1. í•´ë‹¹ êµ¬ì—­ì˜ **ì°¨ë‹¨ê¸°ë¥¼ ë‚´ë¦° ìƒíƒœë¡œ ìœ ì§€**í•´ ì£¼ì„¸ìš”\n2. ë²½ì´ë‚˜ ê¸ˆì† ë¶€ë¶„ì— **ì ‘ì´‰ì„ ì‚¼ê°€**í•´ ì£¼ì„¸ìš”\n3. ì –ì€ ì†ìœ¼ë¡œ ì „ê¸°ê¸°ê¸° ì¡°ì‘ ì ˆëŒ€ ê¸ˆì§€\n\nğŸ”Œ **ëˆ„ì „ ì˜ì‹¬ ì¦ìƒ ë¶„ì„:**\n- âœ… ë²½ë©´ ë¯¸ì„¸ ì „ë¥˜ ê°ì§€ â†’ ë²½ì²´ ë‚´ë¶€ ë°°ì„  ì ˆì—° ì—´í™” ê°€ëŠ¥ì„±\n- âœ… ëˆ„ì „ì°¨ë‹¨ê¸°(ELB) ë°˜ë³µ íŠ¸ë¦½ â†’ ëˆ„ì„¤ ì „ë¥˜ 30mA ì´ìƒ ì˜ì‹¬\n\nğŸ“‹ **ê¸´ê¸‰ ì¡°ì¹˜ ê³„íš:**\n1. **ê¸´ê¸‰ ì•ˆì „ì ê²€ ì ‘ìˆ˜ ì™„ë£Œ** - ì ‘ìˆ˜ë²ˆí˜¸: SF-2024-05891\n2. **ê¸ˆì¼ ì¤‘ ê¸´ê¸‰ ì¶œë™** (ì•ˆì „ ì‚¬ì•ˆì´ë¯€ë¡œ ìš°ì„  ë°°ì •)\n3. ì ê²€ ë‚´ìš©:\n   - ì ˆì—°ì €í•­ ì¸¡ì • (ë©”ê±° í…ŒìŠ¤íŠ¸)\n   - ëˆ„ì „ì°¨ë‹¨ê¸° ë™ì‘ ì‹œí—˜\n   - ì ‘ì§€ ìƒíƒœ í™•ì¸\n   - ë…¸í›„ ë°°ì„  í™•ì¸\n4. **ì ê²€ ë¹„ìš©: ë¬´ìƒ** (í•œì „ ì•ˆì „ì ê²€ ì„œë¹„ìŠ¤)\n\nâš ï¸ ì ê²€ ì „ê¹Œì§€ í•´ë‹¹ íšŒë¡œ ì‚¬ìš©ì„ **ìì œ**í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\nê¸´ê¸‰ ìƒí™© ë°œìƒ ì‹œ **í•œì „ ì•ˆì „ì„¼í„° 123**ìœ¼ë¡œ ì¦‰ì‹œ ì—°ë½í•´ ì£¼ì„¸ìš”.', time: '13:53', rating: 0 }
    ],
    ragResults: [
      { title: 'ëˆ„ì „ ê¸´ê¸‰ ì•ˆì „ì ê²€ ì²˜ë¦¬ ì‚¬ë¡€', score: 96.7, date: '2024.12.05' },
      { title: 'ê°€ì •ìš© ëˆ„ì „ì°¨ë‹¨ê¸° íŠ¸ë¦½ ì›ì¸ ë¶„ì„', score: 94.2, date: '2024.11.10' },
      { title: 'ì˜¥ë‚´ë°°ì„  ì ˆì—°ì—´í™” ì ê²€ ê°€ì´ë“œ', score: 91.8, date: '2024.08.14' }
    ],
    suggestedResponse: 'ëˆ„ì „ ì˜ì‹¬ ì¦ìƒì´ í™•ì¸ë˜ì–´ ê¸ˆì¼ ì¤‘ ê¸´ê¸‰ ì•ˆì „ì ê²€íŒ€ì„ ë°°ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ì ê²€ ì „ê¹Œì§€ í•´ë‹¹ íšŒë¡œ ì‚¬ìš©ì„ ìì œí•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.'
  }
];

// AI mock responses for custom messages
const aiResponses = [
  { keywords: ['ìš”ê¸ˆ', 'ë¹„ì‹¸', 'ì²­êµ¬', 'ë‚©ë¶€', 'ë§ì´'], response: 'ê³ ê°ë‹˜ì˜ ìš”ê¸ˆ ê´€ë ¨ ë¬¸ì˜ë¥¼ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.\n\ní˜„ì¬ ì ìš© ì¤‘ì¸ ìš”ê¸ˆì œì™€ ìµœê·¼ 3ê°œì›” ì‚¬ìš©ëŸ‰ ì¶”ì´ë¥¼ ë¶„ì„í•œ ê²°ê³¼, ìš”ê¸ˆ ë³€ë™ì˜ ì£¼ìš” ì›ì¸ì„ íŒŒì•…í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nğŸ“Š ìƒì„¸í•œ ìš”ê¸ˆ ë¶„ì„ ê²°ê³¼ë¥¼ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤:\n- í˜„ì¬ ìš”ê¸ˆì œ: ì£¼íƒìš©(ì €ì••)\n- ìµœì  ìš”ê¸ˆì œ ì¶”ì²œ ì‹œìŠ¤í…œì„ í†µí•´ ì ˆê° ê°€ëŠ¥ ê¸ˆì•¡ì„ ì‚°ì¶œ ì¤‘ì…ë‹ˆë‹¤.\n\nì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ ì£¼ì„¸ìš”.' },
  { keywords: ['ì •ì „', 'ì „ê¸°', 'ì•ˆë“¤ì–´', 'ë³µêµ¬'], response: 'ì •ì „ ê´€ë ¨ ë¬¸ì˜ë¥¼ ì ‘ìˆ˜í•˜ì˜€ìŠµë‹ˆë‹¤.\n\ní˜„ì¬ í•´ë‹¹ ì§€ì—­ì˜ ë°°ì „ë§ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nâš¡ ë³µêµ¬ í˜„í™©:\n- í˜„ì¥ ìƒí™© íŒŒì•… ì¤‘\n- ë³µêµ¬íŒ€ ë°°ì • í™•ì¸ ì¤‘\n\nì •í™•í•œ ë³µêµ¬ ì˜ˆìƒ ì‹œê°„ì´ í™•ì¸ë˜ëŠ” ëŒ€ë¡œ SMSë¡œ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.' },
  { keywords: ['íƒœì–‘ê´‘', 'ë°œì „', 'ì—°ê³„', 'ì‹ ì¬ìƒ', 'ì„¤ì¹˜'], response: 'ì‹ ì¬ìƒì—ë„ˆì§€ ê´€ë ¨ ë¬¸ì˜ ê°ì‚¬í•©ë‹ˆë‹¤.\n\níƒœì–‘ê´‘ ë°œì „ ê³„í†µì—°ê³„ì— í•„ìš”í•œ ì ˆì°¨ì™€ ì„œë¥˜ë¥¼ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nğŸ“‘ ì£¼ìš” ì ˆì°¨:\n1. ë°œì „ì‚¬ì—… í—ˆê°€ ì‹ ì²­\n2. ê³„í†µì—°ê³„ ê¸°ìˆ ê²€í† \n3. ê³µì‚¬ ë° ì¤€ê³µê²€ì‚¬\n\nì„¸ë¶€ ì‚¬í•­ì€ ë‹´ë‹¹ ë¶€ì„œì™€ ì—°ê²°í•˜ì—¬ ë§ì¶¤ ì•ˆë‚´ë¥¼ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.' },
  { keywords: ['ê³„ëŸ‰ê¸°', 'ê²€ì¹¨', 'ê³ ì¥', 'ìˆ«ì'], response: 'ê³„ëŸ‰ê¸° ê´€ë ¨ ë¬¸ì˜ë¥¼ ì ‘ìˆ˜í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nì›ê²© ê²€ì¹¨ ì‹œìŠ¤í…œì„ í†µí•´ í•´ë‹¹ ê³„ëŸ‰ê¸°ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nğŸ” í™•ì¸ ì‚¬í•­:\n- ê³„ëŸ‰ê¸° ìƒíƒœ ì›ê²© ì§„ë‹¨ ì¤‘\n- ì´ìƒ í™•ì¸ ì‹œ í˜„ì¥ ì ê²€ ìë™ ì ‘ìˆ˜\n\nì ê²€ ê²°ê³¼ë¥¼ ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.' },
  { keywords: ['ëˆ„ì „', 'ê°ì „', 'ì°¨ë‹¨ê¸°', 'ì•ˆì „', 'ìœ„í—˜'], response: 'âš ï¸ ì•ˆì „ ê´€ë ¨ ê¸´ê¸‰ ë¬¸ì˜ë¡œ ë¶„ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì¦‰ì‹œ ì¡°ì¹˜ì‚¬í•­:\n1. í•´ë‹¹ êµ¬ì—­ ì°¨ë‹¨ê¸°ë¥¼ ë‚´ë ¤ì£¼ì„¸ìš”\n2. ì „ê¸°ê¸°ê¸° ì ‘ì´‰ì„ ì‚¼ê°€í•´ ì£¼ì„¸ìš”\n\nğŸš¨ ê¸´ê¸‰ ì•ˆì „ì ê²€íŒ€ ë°°ì •ì„ ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤.\nê¸´ê¸‰ ìƒí™© ì‹œ í•œì „ ì•ˆì „ì„¼í„° 123ìœ¼ë¡œ ì—°ë½í•´ ì£¼ì„¸ìš”.' }
];

const defaultResponse = 'ê³ ê°ë‹˜ì˜ ë¬¸ì˜ë¥¼ ì ‘ìˆ˜í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nAI ì‹œìŠ¤í…œì´ ë¬¸ì˜ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ ìµœì ì˜ ë‹µë³€ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nğŸ“‹ ì ‘ìˆ˜ í˜„í™©:\n- ë¬¸ì˜ ìœ í˜•: ìë™ ë¶„ë¥˜ ì¤‘\n- ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„: ì¦‰ì‹œ\n- ë‹´ë‹¹ ë¶€ì„œ: ìë™ ë°°ì • ì¤‘\n\nì •í™•í•œ ë‹µë³€ì„ ìœ„í•´ ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.';

// ===================== STATE =====================
let activeInquiryId = 1;
let isAutoMode = true;
let isTyping = false;

// ===================== RENDER FUNCTIONS =====================

function renderInquiryList() {
  const list = document.getElementById('inquiryList');
  list.innerHTML = inquiries.map(inq => `
    <div class="inquiry-item px-4 py-3 cursor-pointer ${inq.id === activeInquiryId ? 'active' : ''}" onclick="selectInquiry(${inq.id})">
      <div class="flex items-start gap-3">
        <div class="w-9 h-9 rounded-full bg-gradient-to-br ${inq.avatarColor} flex items-center justify-center text-white font-bold text-sm flex-shrink-0 relative">
          ${inq.avatar}
          ${inq.unread ? '<span class="absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-sky-400 rounded-full border-2 border-dark-800"></span>' : ''}
        </div>
        <div class="min-w-0 flex-1">
          <div class="flex items-center justify-between mb-0.5">
            <span class="text-xs font-semibold text-white">${inq.name}</span>
            <span class="text-[10px] text-slate-500">${inq.time}</span>
          </div>
          <p class="text-[11px] text-slate-400 truncate mb-1.5">${inq.preview}</p>
          <span class="category-badge ${inq.categoryColor}">${inq.category}</span>
        </div>
      </div>
    </div>
  `).join('');
}

function renderChatMessages() {
  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq) return;

  const container = document.getElementById('chatMessages');
  container.innerHTML = '';

  inq.messages.forEach((msg, idx) => {
    if (msg.role === 'customer') {
      container.innerHTML += createCustomerBubble(msg);
    } else if (msg.role === 'ai') {
      container.innerHTML += createAiBubble(msg, idx);
    } else if (msg.role === 'user') {
      container.innerHTML += createUserBubble(msg);
    }
  });

  // scroll to bottom
  setTimeout(() => { container.scrollTop = container.scrollHeight; }, 50);
  lucide.createIcons();
}

function createCustomerBubble(msg) {
  return `
    <div class="chat-bubble flex justify-start">
      <div class="max-w-lg">
        <div class="bg-dark-600 border border-white/5 rounded-2xl rounded-tl-sm px-4 py-3">
          <p class="text-sm text-slate-200 whitespace-pre-wrap leading-relaxed">${msg.text}</p>
        </div>
        <p class="text-[10px] text-slate-600 mt-1 ml-1">${msg.time}</p>
      </div>
    </div>
  `;
}

function createAiBubble(msg, idx) {
  const ratingHtml = createRatingStars(msg, idx);
  return `
    <div class="chat-bubble flex justify-end">
      <div class="max-w-lg">
        <div class="bg-gradient-to-br from-sky-900/30 to-violet-900/30 border border-sky-500/10 rounded-2xl rounded-tr-sm px-4 py-3">
          <div class="flex items-center gap-1.5 mb-2">
            <i data-lucide="bot" class="w-3.5 h-3.5 text-sky-400"></i>
            <span class="text-[10px] font-semibold text-sky-400">AI ìë™ ì‘ë‹µ</span>
          </div>
          <div class="text-sm text-slate-200 whitespace-pre-wrap leading-relaxed">${formatMessageText(msg.text)}</div>
        </div>
        <div class="flex items-center justify-end gap-3 mt-1.5">
          <div class="flex items-center gap-0.5" id="rating-${activeInquiryId}-${idx}">
            ${ratingHtml}
          </div>
          <p class="text-[10px] text-slate-600">${msg.time}</p>
        </div>
      </div>
    </div>
  `;
}

function createUserBubble(msg) {
  return `
    <div class="chat-bubble flex justify-end">
      <div class="max-w-lg">
        <div class="bg-gradient-to-br from-violet-600/30 to-purple-700/30 border border-violet-500/15 rounded-2xl rounded-tr-sm px-4 py-3">
          <div class="flex items-center gap-1.5 mb-2">
            <i data-lucide="user" class="w-3.5 h-3.5 text-violet-400"></i>
            <span class="text-[10px] font-semibold text-violet-400">ë‹´ë‹¹ì ë‹µë³€</span>
          </div>
          <p class="text-sm text-slate-200 whitespace-pre-wrap leading-relaxed">${msg.text}</p>
        </div>
        <p class="text-[10px] text-slate-600 mt-1 text-right">${msg.time}</p>
      </div>
    </div>
  `;
}

function createRatingStars(msg, idx) {
  let html = '<span class="text-[10px] text-slate-600 mr-1">ë‹µë³€ í’ˆì§ˆ</span>';
  for (let s = 1; s <= 5; s++) {
    const filled = msg.rating >= s ? 'filled' : '';
    html += `<button class="star-btn ${filled}" onclick="rateMessage(${idx}, ${s})" style="background:none;border:none;cursor:pointer;padding:0;">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="${msg.rating >= s ? '#fbbf24' : 'none'}" stroke="${msg.rating >= s ? '#fbbf24' : '#475569'}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
    </button>`;
  }
  return html;
}

function formatMessageText(text) {
  return text
    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-white">$1</strong>');
}

function renderAnalysisPanel() {
  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq) return;

  const panel = document.getElementById('analysisPanel');
  const circumference = 2 * Math.PI * 36;
  const offset = circumference - (inq.confidence / 100) * circumference;

  let confidenceColor = '#38bdf8';
  if (inq.confidence >= 95) confidenceColor = '#34d399';
  else if (inq.confidence >= 90) confidenceColor = '#38bdf8';
  else if (inq.confidence >= 85) confidenceColor = '#fbbf24';

  panel.innerHTML = `
    <div class="p-4 space-y-4 slide-in-right">
      <!-- Category Classification -->
      <div>
        <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2.5">AI ë¶„ì„ ê²°ê³¼</h3>
        <div class="bg-dark-700 rounded-xl border border-white/5 p-3.5">
          <div class="flex items-center justify-between mb-3">
            <span class="text-xs text-slate-400">ìë™ ë¶„ë¥˜</span>
            <span class="category-badge ${inq.categoryColor} text-xs px-3 py-1">${inq.category}</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-xs text-slate-400">ê³ ê° ìœ í˜•</span>
            <span class="text-xs text-white font-medium">${inq.type}</span>
          </div>
        </div>
      </div>

      <!-- Confidence Score -->
      <div>
        <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2.5">ë‹µë³€ ì‹ ë¢°ë„</h3>
        <div class="bg-dark-700 rounded-xl border border-white/5 p-4 flex items-center gap-4">
          <div class="relative flex-shrink-0">
            <svg width="84" height="84" viewBox="0 0 84 84">
              <circle cx="42" cy="42" r="36" stroke="#1e293b" stroke-width="6" fill="none"/>
              <circle cx="42" cy="42" r="36" stroke="${confidenceColor}" stroke-width="6" fill="none"
                stroke-dasharray="${circumference}" stroke-dashoffset="${offset}"
                stroke-linecap="round" transform="rotate(-90 42 42)" class="confidence-ring"/>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-lg font-bold text-white">${inq.confidence}%</span>
            </div>
          </div>
          <div>
            <p class="text-xs font-semibold text-white mb-1">
              ${inq.confidence >= 95 ? 'ë§¤ìš° ë†’ìŒ' : inq.confidence >= 90 ? 'ë†’ìŒ' : 'ë³´í†µ'}
            </p>
            <p class="text-[10px] text-slate-500 leading-relaxed">RAG ê²€ìƒ‰ ê¸°ë°˜ ì‘ë‹µ í’ˆì§ˆ í‰ê°€ ì ìˆ˜ì…ë‹ˆë‹¤.</p>
          </div>
        </div>
      </div>

      <!-- RAG Results -->
      <div>
        <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2.5">RAG ê²€ìƒ‰ ê²°ê³¼</h3>
        <div class="bg-dark-700 rounded-xl border border-white/5 overflow-hidden">
          <div class="px-3.5 py-2.5 border-b border-white/5 flex items-center gap-2">
            <i data-lucide="database" class="w-3.5 h-3.5 text-sky-400"></i>
            <span class="text-[11px] font-semibold text-sky-400">ìœ ì‚¬ ê³¼ê±° ë‹µë³€ 3ê±´ ë°œê²¬</span>
          </div>
          ${inq.ragResults.map((r, i) => `
            <div class="rag-result px-3.5 py-2.5 ${i < inq.ragResults.length - 1 ? 'border-b border-white/5' : ''} cursor-pointer">
              <div class="flex items-start justify-between gap-2">
                <p class="text-[11px] text-slate-300 font-medium leading-snug">${r.title}</p>
                <span class="text-[10px] font-bold ${r.score >= 95 ? 'text-emerald-400' : r.score >= 90 ? 'text-sky-400' : 'text-amber-400'} flex-shrink-0">${r.score}%</span>
              </div>
              <p class="text-[10px] text-slate-600 mt-1">${r.date}</p>
              <div class="mt-1.5 h-1 bg-dark-600 rounded-full overflow-hidden">
                <div class="h-full rounded-full gauge-fill ${r.score >= 95 ? 'bg-emerald-500' : r.score >= 90 ? 'bg-sky-500' : 'bg-amber-500'}" style="width: ${r.score}%"></div>
              </div>
            </div>
          `).join('')}
        </div>
      </div>

      <!-- Suggested Response Actions -->
      <div>
        <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2.5">ì¶”ì²œ ë‹µë³€</h3>
        <div class="bg-dark-700 rounded-xl border border-white/5 p-3.5">
          <p class="text-[11px] text-slate-300 leading-relaxed mb-3">${inq.suggestedResponse}</p>
          <div class="flex gap-2">
            <button onclick="adoptResponse()" class="flex-1 py-2 rounded-lg bg-gradient-to-r from-sky-500 to-violet-600 text-white text-xs font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-1.5">
              <i data-lucide="check-circle" class="w-3.5 h-3.5"></i>
              ë‹µë³€ ì±„íƒ
            </button>
            <button onclick="editResponse()" class="flex-1 py-2 rounded-lg border border-white/10 text-slate-300 text-xs font-medium hover:bg-white/5 transition-colors flex items-center justify-center gap-1.5">
              <i data-lucide="edit-3" class="w-3.5 h-3.5"></i>
              ìˆ˜ì • í›„ ë°œì†¡
            </button>
          </div>
        </div>
      </div>

      <!-- Customer Info -->
      <div>
        <h3 class="text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2.5">ê³ ê° ì •ë³´</h3>
        <div class="bg-dark-700 rounded-xl border border-white/5 p-3.5 space-y-2">
          <div class="flex justify-between">
            <span class="text-[11px] text-slate-500">ê³ ê°ëª…</span>
            <span class="text-[11px] text-white font-medium">${inq.name}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-[11px] text-slate-500">ê³ ê°ë²ˆí˜¸</span>
            <span class="text-[11px] text-white font-medium">${inq.customerId}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-[11px] text-slate-500">ê³„ì•½ ìœ í˜•</span>
            <span class="text-[11px] text-white font-medium">${inq.type}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-[11px] text-slate-500">ì§€ì—­</span>
            <span class="text-[11px] text-white font-medium">${inq.location}</span>
          </div>
        </div>
      </div>
    </div>
  `;
  lucide.createIcons();
}

function updateChatHeader() {
  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq) return;
  document.getElementById('chatAvatar').textContent = inq.avatar;
  document.getElementById('chatAvatar').className = `w-9 h-9 rounded-full bg-gradient-to-br ${inq.avatarColor} flex items-center justify-center text-white font-bold text-sm`;
  document.getElementById('chatName').textContent = inq.name;
  document.getElementById('chatMeta').textContent = `ê³ ê°ë²ˆí˜¸: ${inq.customerId} Â· ${inq.type} Â· ${inq.location}`;
}

// ===================== INTERACTIONS =====================

function selectInquiry(id) {
  activeInquiryId = id;
  renderInquiryList();
  renderChatMessages();
  renderAnalysisPanel();
  updateChatHeader();
}

function toggleMode() {
  isAutoMode = !document.getElementById('modeToggle').checked;
  const label = document.getElementById('modeLabel');
  if (isAutoMode) {
    label.textContent = 'AI ìë™ ë‹µë³€';
    label.className = 'text-xs font-medium text-sky-400';
    document.getElementById('inputHint').textContent = 'Enterë¡œ ì „ì†¡ Â· Shift+Enterë¡œ ì¤„ë°”ê¿ˆ';
  } else {
    label.textContent = 'ë‹´ë‹¹ì ê²€í† ';
    label.className = 'text-xs font-medium text-violet-400';
    document.getElementById('inputHint').textContent = 'ë‹´ë‹¹ì ê²€í†  ëª¨ë“œ Â· ë‹µë³€ ì „ í™•ì¸ í•„ìš”';
  }
}

function handleChatKeydown(e) {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
}

function autoResize(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 120) + 'px';
}

function sendMessage() {
  const input = document.getElementById('chatInput');
  const text = input.value.trim();
  if (!text || isTyping) return;

  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq) return;

  const now = new Date();
  const timeStr = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;

  // Determine if it's a customer message or agent reply
  // For demo: treat input as customer question, then AI responds
  inq.messages.push({ role: 'customer', text: text, time: timeStr });

  input.value = '';
  input.style.height = 'auto';
  renderChatMessages();

  // Show typing indicator, then AI response
  isTyping = true;
  showTypingIndicator();

  const delay = 1200 + Math.random() * 1200;
  setTimeout(() => {
    removeTypingIndicator();
    const aiText = generateAIResponse(text);
    inq.messages.push({ role: isAutoMode ? 'ai' : 'user', text: aiText, time: timeStr, rating: 0 });
    isTyping = false;
    renderChatMessages();
  }, delay);
}

function generateAIResponse(input) {
  const lowerInput = input.toLowerCase();
  for (const resp of aiResponses) {
    if (resp.keywords.some(kw => lowerInput.includes(kw))) {
      return resp.response;
    }
  }
  return defaultResponse;
}

function showTypingIndicator() {
  const container = document.getElementById('chatMessages');
  const div = document.createElement('div');
  div.id = 'typingIndicator';
  div.className = 'chat-bubble flex justify-end';
  div.innerHTML = `
    <div class="max-w-lg">
      <div class="bg-gradient-to-br from-sky-900/30 to-violet-900/30 border border-sky-500/10 rounded-2xl rounded-tr-sm px-5 py-4">
        <div class="flex items-center gap-1.5 mb-2">
          <i data-lucide="bot" class="w-3.5 h-3.5 text-sky-400"></i>
          <span class="text-[10px] font-semibold text-sky-400">AI ë‹µë³€ ìƒì„± ì¤‘...</span>
        </div>
        <div class="flex items-center gap-1.5">
          <span class="typing-dot w-2 h-2 rounded-full bg-sky-400 inline-block"></span>
          <span class="typing-dot w-2 h-2 rounded-full bg-sky-400 inline-block"></span>
          <span class="typing-dot w-2 h-2 rounded-full bg-sky-400 inline-block"></span>
        </div>
      </div>
    </div>
  `;
  container.appendChild(div);
  container.scrollTop = container.scrollHeight;
  lucide.createIcons();
}

function removeTypingIndicator() {
  const el = document.getElementById('typingIndicator');
  if (el) el.remove();
}

function rateMessage(msgIdx, stars) {
  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq || !inq.messages[msgIdx]) return;
  inq.messages[msgIdx].rating = stars;
  renderChatMessages();
}

function adoptResponse() {
  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq) return;

  const btn = event.target.closest('button');
  btn.innerHTML = '<svg class="w-3.5 h-3.5 inline mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg> ì±„íƒ ì™„ë£Œ';
  btn.classList.remove('from-sky-500', 'to-violet-600');
  btn.classList.add('bg-emerald-600');
  btn.disabled = true;

  // Update the status badge
  document.getElementById('chatStatus').textContent = 'ë‹µë³€ ë°œì†¡ ì™„ë£Œ';
  document.getElementById('chatStatus').className = 'text-[10px] bg-emerald-500/15 text-emerald-400 px-2.5 py-1 rounded-full font-medium';
}

function editResponse() {
  const inq = inquiries.find(i => i.id === activeInquiryId);
  if (!inq) return;

  const input = document.getElementById('chatInput');
  input.value = inq.suggestedResponse;
  input.focus();
  autoResize(input);
}

// ===================== INIT =====================
function init() {
  renderInquiryList();
  renderChatMessages();
  renderAnalysisPanel();
  updateChatHeader();
  lucide.createIcons();

  // Animate gauge bars after load
  setTimeout(() => {
    document.querySelectorAll('.gauge-fill').forEach(el => {
      el.style.width = el.style.width; // trigger repaint
    });
  }, 100);
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
